<project xmlns="https://maven.apache.org/POM/4.0.0"
	xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="https://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>RealWorldAutomation</groupId>
  <artifactId>Amazon</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  
  
   <!-- Project-wide properties -->
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
    </properties>
  
  <dependencies>
		<!-- Selenium Java -->
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>4.23.0</version>
        </dependency>

		<!-- TestNG -->
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.14.3</version>
            <scope>test</scope>
        </dependency>

		<!-- WebDriverManager (auto driver download) -->
        <dependency>
            <groupId>io.github.bonigarcia</groupId>
            <artifactId>webdrivermanager</artifactId>
            <version>5.9.2</version>
        </dependency>

		<!--Extent Report-->
       <dependency>
           <groupId>com.aventstack</groupId>
           <artifactId>extentreports</artifactId>
           <version>5.1.1</version>
       </dependency>


		<!-- Log4j2 Core -->
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-core</artifactId>
        <version>2.22.1</version>
    </dependency>

		<!-- Log4j2 API -->
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-api</artifactId>
        <version>2.22.1</version>
    </dependency>

		<!-- apache common IO for screenshot -->
    <dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.16.1</version>
   </dependency>


		<!-- Use JavaMail API (Jakarta Mail) to Send Email -->
<dependency>
    <groupId>com.sun.mail</groupId>
    <artifactId>jakarta.mail</artifactId>
    <version>2.0.1</version>
</dependency>


		<!-- Allure TestNG Adapter -->
    <dependency>
        <groupId>io.qameta.allure</groupId>
        <artifactId>allure-testng</artifactId>
        <version>2.24.0</version>
    </dependency>
    
    <dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.9.19</version>
</dependency>


   
   
    </dependencies>
    
<build>
    <plugins>
    
        <!-- Maven Compiler Plugin -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.13.0</version>
            <configuration>
                <source>${maven.compiler.source}</source>
                <target>${maven.compiler.target}</target>
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>
			<!-- Allure Maven Plugin -->
        <plugin>
            <groupId>io.qameta.allure</groupId>
            <artifactId>allure-maven</artifactId>
            <version>2.12.0</version>
        </plugin>

			<!-- Maven Surefire Plugin -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>3.0.0</version>
            <configuration>
                <argLine>
                 -javaagent:"${settings.localRepository}/org/aspectj/aspectjweaver/1.9.19/aspectjweaver-1.9.19.jar"
                </argLine>
                <systemPropertyVariables>
						<!-- Force allure results into target/allure-results -->
                    <allure.results.directory>${project.build.directory}/allure-results</allure.results.directory>
                </systemPropertyVariables>
            </configuration>
        </plugin>
    </plugins>
</build>

  
</project>


<!--<dependencies> = libraries your project needs at runtime/compile time.

<build><plugins> = tools Maven uses at build/test/reporting phase.-->

<!--A build phase is a step in Mavenâ€™s build lifecycle.
Think of Maven as a pipeline â€” each phase runs in sequence, and plugins hook into those 
phases to do work (compile code, run tests, package JAR, generate reports, etc.).-->


<!--Surefire â†’ Runs the tests + sends results to /target/allure-results.

Allure Maven â†’ Reads those results + builds the report.

Without Surefire:

Tests may run (via Eclipse), but results land in wrong place (/allure-results root).

Without Allure Maven plugin:

Tests run fine, results exist in target/allure-results, but you canâ€™t generate the nice HTML report with mvn allure:serve.

ðŸ‘‰ Think of it like this analogy:

Surefire = the printer (produces raw printouts).

Allure Maven plugin = the binder (collects pages into a glossy report).-->



<!--Without Surefire: Maven doesnâ€™t know how to start TestNG.
Without TestNG: Surefire has nothing to run.

âœ… So:

For local testing in IDE â†’ TestNG alone is enough.

For enterprise projects with CI/CD pipelines â†’ Surefire is essential because it integrates TestNG into Maven lifecycle.-->



<!--
add the Maven Compiler Plugin explicitly, even though you have the <properties> for maven.compiler.source and target. 
This ensures Maven actually uses Java 17 to compile your code, especially in CI/CD pipelines.-->




<!--What AspectJ is doing for you

When you added:

<argLine>
 -javaagent:"${settings.localRepository}/org/aspectj/aspectjweaver/1.9.19/aspectjweaver-1.9.19.jar"
</argLine>


The JVM loads AspectJ as a Java Agent.

AspectJ weaves into your methods at runtime.

When it sees @Step â†’ it records that step into Allure results.

When it sees @Attachment â†’ it grabs the return value (like screenshot byte[]) and saves it into Allure results.

Thatâ€™s why screenshots and steps only worked once you enabled AspectJ.
Without it â†’ annotations were â€œdead.â€

âš¡ Enterprise Reality

In enterprise Allure setups, AspectJ is almost always present, because:

It automatically captures @Step and @Attachment.

It can log method calls without annotations if configured.

It ensures consistent screenshots/logs even if you forget to explicitly add @Attachment.

Thatâ€™s why most official Allure docs recommend using AspectJ + argLine.-->




<!--1ï¸âƒ£ Allure + AspectJ, but NO @Step / @Attachment used in code
ðŸ“Œ What shows in Allure Report

âœ… Test case name (the method annotated with @Test).

âœ… Test status (Passed / Failed / Skipped).

âœ… Throwable / stack trace if the test fails.

âŒ Test body (steps inside the method) will NOT show â€” because Allure has no idea whatâ€™s happening inside unless you annotate steps or log them manually.

âŒ Screenshots/logs â†’ not attached (since no @Attachment is present).
-->



<!--2ï¸âƒ£ Allure + @Step / @Attachment, but WITHOUT AspectJ

What happens?

Tests will execute fine, annotations compile (they are just markers).

BUT at runtime:
âŒ Test body (steps inside the method) will NOT show
âŒ @Step annotations are ignored â†’ steps wonâ€™t show in report.

âŒ @Attachment annotations are ignored â†’ screenshots/logs wonâ€™t appear.

âœ… Only test lifecycle events (started, passed, failed) will show.




Why?
Without AspectJ agent, JVM never weaves the bytecode that tells Allure â€œhey, this method has a @Step or @Attachment.â€
The annotations are basically dead metadata.

ðŸ‘‰ Result: Report shows only test case names + statuses, no steps, no screenshots.-->

<!--
it means that if i use allure i must use aspectj alone @step and @attachment is not sufficient-->
